package com.example.synchronization_food;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;

import android.app.Activity;
import android.content.Intent;
import android.content.res.Resources;
import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {
	Button bnsynchronization,bn1,bn2,bn3,bn4,bn5,bn6,bn7,bnmenu,bn8,bn9,bn10,bn11,bn12,bn13,bn14,bn15,bn16,bn17,bn18,bn19,bn20,bn21,bn22,bn23,bn24,bn25,bn26;
	ArrayList<String> infoone=new ArrayList<String>();
	String str="";
	Resources resources_green,resources_red;
	Drawable btnDrawable_green,btnDrawable_red;
	long mExitTime=0;
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		requestWindowFeature(Window.FEATURE_NO_TITLE);
		setContentView(R.layout.activity_main);
		bnsynchronization=(Button)findViewById(R.id.Button1);
		bn1=(Button)findViewById(R.id.one);
		bn2=(Button)findViewById(R.id.two);
		bn3=(Button)findViewById(R.id.three);
		bn4=(Button)findViewById(R.id.four);
		bn5=(Button)findViewById(R.id.five);
		bn6=(Button)findViewById(R.id.six);
		bn7=(Button)findViewById(R.id.seven);
		bn8=(Button)findViewById(R.id.eight);
		bn9=(Button)findViewById(R.id.nine);
		bn10=(Button)findViewById(R.id.ten);
		bn11=(Button)findViewById(R.id.eleven);
		bn12=(Button)findViewById(R.id.twelve);
		bn13=(Button)findViewById(R.id.thirteen);
		bn14=(Button)findViewById(R.id.fourteen);
		bn15=(Button)findViewById(R.id.fifteen);
		bn16=(Button)findViewById(R.id.sixteen);
		bn17=(Button)findViewById(R.id.seventeen);
		bn18=(Button)findViewById(R.id.eighteen);
		bn19=(Button)findViewById(R.id.nineteen);
		bn20=(Button)findViewById(R.id.twenty);
		bn21=(Button)findViewById(R.id.twentyone);
		bn22=(Button)findViewById(R.id.twentytwo);
		bn23=(Button)findViewById(R.id.twentythree);
		bn24=(Button)findViewById(R.id.twentyfour);
		bn25=(Button)findViewById(R.id.twentyfive);
		bn26=(Button)findViewById(R.id.twentysix);
		
		bnmenu=(Button)findViewById(R.id.Button2);
		bn1.setOnClickListener(new MyButton());	
		bn2.setOnClickListener(new MyButton());	
		bn3.setOnClickListener(new MyButton());	
		bn4.setOnClickListener(new MyButton());
		bn5.setOnClickListener(new MyButton());
		bn6.setOnClickListener(new MyButton());	
		bn7.setOnClickListener(new MyButton());	
		bn8.setOnClickListener(new MyButton());	
		bn9.setOnClickListener(new MyButton());	
		bn10.setOnClickListener(new MyButton());	
		bn11.setOnClickListener(new MyButton());	
		bn12.setOnClickListener(new MyButton());	
		bn13.setOnClickListener(new MyButton());	
		bn14.setOnClickListener(new MyButton());	
		bn15.setOnClickListener(new MyButton());	
		bn16.setOnClickListener(new MyButton());	
		bn17.setOnClickListener(new MyButton());	
		bn18.setOnClickListener(new MyButton());	
		bn19.setOnClickListener(new MyButton());	
		bn20.setOnClickListener(new MyButton());	
		bn21.setOnClickListener(new MyButton());	
		bn22.setOnClickListener(new MyButton());	
		bn23.setOnClickListener(new MyButton());	
		bn24.setOnClickListener(new MyButton());	
		bn25.setOnClickListener(new MyButton());	
		bn26.setOnClickListener(new MyButton());
		bnsynchronization.setOnClickListener(new MyButton());
		bnmenu.setOnClickListener(new MyButton());	
		
		MyApplication.getInstance().addActivity(this);
		MyApplication.getInstance().showActivity();
   
		resources_green = this.getBaseContext().getResources();   
		btnDrawable_green = resources_green.getDrawable(R.drawable.shape);
		
		resources_red = this.getBaseContext().getResources();   
		btnDrawable_red = resources_red.getDrawable(R.drawable.shapered);
	}

	class MyButton implements View.OnClickListener
	{
		public void onClick(View source)
		{
			switch(source.getId())
			{
			    case R.id.Button1:
			    	//Toast.makeText(MainActivity.this, "数据接受中请不要重复按键", Toast.LENGTH_SHORT).show();
	                RecycleGuestFromServer one=new RecycleGuestFromServer(handler1,"1号"); 
					ExecutorService executor=Executors.newSingleThreadExecutor();
					Future future=executor.submit(one);
					try {
						str=(String)future.get();
						Log.d("str",str);
						String tablenumber[]=str.split("\n");
						for(int i=0;i<tablenumber.length;i++)
						{
							Log.d("tablenumber"+String.valueOf(i),tablenumber[i]);
						}
						
						if(tablenumber[0].equals("0"))
						{
							bn1.setBackground(btnDrawable_green); 
						}
						else
						{
							bn1.setBackground(btnDrawable_red);
						}
						if(tablenumber[1].equals("0"))
						{
							bn2.setBackground(btnDrawable_green); 
						}
						else
						{
							bn2.setBackground(btnDrawable_red);
						}
						if(tablenumber[2].equals("0"))
						{
							bn3.setBackground(btnDrawable_green); 
						}
						else
						{
							bn3.setBackground(btnDrawable_red);
						}
						if(tablenumber[3].equals("0"))
						{
							bn4.setBackground(btnDrawable_green); 
						}
						else
						{
							bn4.setBackground(btnDrawable_red);
						}
						if(tablenumber[4].equals("0"))
						{
							bn5.setBackground(btnDrawable_green); 
						}
						else
						{
							bn5.setBackground(btnDrawable_red);
						}
						if(tablenumber[5].equals("0"))
						{
							bn6.setBackground(btnDrawable_green); 
						}
						else
						{
							bn6.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[6].equals("0"))
						{
							bn7.setBackground(btnDrawable_green); 
						}
						else
						{
							bn7.setBackground(btnDrawable_red);
						}
						if(tablenumber[7].equals("0"))
						{
							bn8.setBackground(btnDrawable_green); 
						}
						else
						{
							bn8.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[8].equals("0"))
						{
							bn9.setBackground(btnDrawable_green); 
						}
						else
						{
							bn9.setBackground(btnDrawable_red);
						}
						if(tablenumber[9].equals("0"))
						{
							bn10.setBackground(btnDrawable_green); 
						}
						else
						{
							bn10.setBackground(btnDrawable_red);
						}
						if(tablenumber[10].equals("0"))
						{
							bn11.setBackground(btnDrawable_green); 
						}
						else
						{
							bn11.setBackground(btnDrawable_red);
						}
						if(tablenumber[11].equals("0"))
						{
							bn12.setBackground(btnDrawable_green); 
						}
						else
						{
							bn12.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[12].equals("0"))
						{
							bn13.setBackground(btnDrawable_green); 
						}
						else
						{
							bn13.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[12].equals("0"))
						{
							bn13.setBackground(btnDrawable_green); 
						}
						else
						{
							bn13.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[13].equals("0"))
						{
							bn14.setBackground(btnDrawable_green); 
						}
						else
						{
							bn14.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[14].equals("0"))
						{
							bn15.setBackground(btnDrawable_green); 
						}
						else
						{
							bn15.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[15].equals("0"))
						{
							bn16.setBackground(btnDrawable_green); 
						}
						else
						{
							bn16.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[16].equals("0"))
						{
							bn17.setBackground(btnDrawable_green); 
						}
						else
						{
							bn17.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[17].equals("0"))
						{
							bn18.setBackground(btnDrawable_green); 
						}
						else
						{
							bn18.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[18].equals("0"))
						{
							bn19.setBackground(btnDrawable_green); 
						}
						else
						{
							bn19.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[19].equals("0"))
						{
							bn20.setBackground(btnDrawable_green); 
						}
						else
						{
							bn20.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[20].equals("0"))
						{
							bn21.setBackground(btnDrawable_green); 
						}
						else
						{
							bn21.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[21].equals("0"))
						{
							bn22.setBackground(btnDrawable_green); 
						}
						else
						{
							bn22.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[22].equals("0"))
						{
							bn23.setBackground(btnDrawable_green); 
						}
						else
						{
							bn23.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[23].equals("0"))
						{
							bn24.setBackground(btnDrawable_green); 
						}
						else
						{
							bn24.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[24].equals("0"))
						{
							bn25.setBackground(btnDrawable_green); 
						}
						else
						{
							bn25.setBackground(btnDrawable_red);
						}
						
						if(tablenumber[25].equals("0"))
						{
							bn26.setBackground(btnDrawable_green); 
						}
						else
						{
							bn26.setBackground(btnDrawable_red);
						}
						
					} 
					catch (Exception e) {
					 e.printStackTrace();
					}
					
					break;
				case R.id.Button2:
	        		Intent Intent6=new Intent(MainActivity.this,menu.class);
	        		Intent6.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	  			  	startActivity(Intent6); 
			 		break;
				case R.id.twentysix:
					infoone.clear();
					dealData("26号");
					Intent intent26=new Intent(MainActivity.this,One.class);
	 				intent26.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent26.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent26,0); 
	 			    break; 
				case R.id.twentyfive:
					infoone.clear();
					dealData("25号");
					Intent intent25=new Intent(MainActivity.this,One.class);
	 				intent25.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent25.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent25,0); 
	 			    break; 
				case R.id.twentyfour:
					infoone.clear();
					dealData("24号");
					Intent intent24=new Intent(MainActivity.this,One.class);
	 				intent24.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent24.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent24,0); 
	 			    break; 
				case R.id.twentythree:
					infoone.clear();
					dealData("23号");
					Intent intent23=new Intent(MainActivity.this,One.class);
	 				intent23.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent23.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent23,0); 
	 			    break; 
				case R.id.twentytwo:
					infoone.clear();
					dealData("22号");
					Intent intent22=new Intent(MainActivity.this,One.class);
	 				intent22.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent22.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent22,0); 
	 			    break; 
				case R.id.twentyone:
					infoone.clear();
					dealData("21号");
					Intent intent21=new Intent(MainActivity.this,One.class);
	 				intent21.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent21.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent21,0); 
	 			    break; 
				case R.id.twenty:
					infoone.clear();
					dealData("20号");
					Intent intent20=new Intent(MainActivity.this,One.class);
	 				intent20.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent20.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent20,0); 
	 			    break; 
				case R.id.nineteen:
					infoone.clear();
					dealData("19号");
					Intent intent19=new Intent(MainActivity.this,One.class);
	 				intent19.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent19.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent19,0); 
	 			    break; 
				case R.id.eighteen:
					infoone.clear();
					dealData("18号");
					Intent intent18=new Intent(MainActivity.this,One.class);
	 				intent18.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent18.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent18,0); 
	 			    break; 
				case R.id.seventeen:
					infoone.clear();
					dealData("17号");
					Intent intent17=new Intent(MainActivity.this,One.class);
	 				intent17.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent17.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent17,0); 
	 			    break; 
				case R.id.sixteen:
					infoone.clear();
					dealData("16号");
					Intent intent16=new Intent(MainActivity.this,One.class);
	 				intent16.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent16.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent16,0); 
	 			    break; 
				case R.id.fifteen:
					infoone.clear();
					dealData("15号");
					Intent intent15=new Intent(MainActivity.this,One.class);
	 				intent15.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent15.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent15,0); 
	 			    break; 
				case R.id.fourteen:
					infoone.clear();
					dealData("14号");
					Intent intent14=new Intent(MainActivity.this,One.class);
	 				intent14.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent14.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent14,0); 
	 			    break; 
				case R.id.thirteen:
					infoone.clear();
					dealData("13号");
					Intent intent13=new Intent(MainActivity.this,One.class);
	 				intent13.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent13.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent13,0); 
	 			    break; 
				case R.id.twelve:
					infoone.clear();
					dealData("12号");
					Intent intent12=new Intent(MainActivity.this,One.class);
	 				intent12.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent12.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent12,0); 
	 			    break; 
				case R.id.eleven:
					infoone.clear();
					dealData("11号");
					Intent intent11=new Intent(MainActivity.this,One.class);
	 				intent11.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent11.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent11,0); 
	 			    break; 
				case R.id.ten:
					infoone.clear();
					dealData("10号");
					Intent intent10=new Intent(MainActivity.this,One.class);
	 				intent10.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent10.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent10,0); 
	 			    break; 
				case R.id.nine:
					infoone.clear();
					dealData("9号");
					Intent intent9=new Intent(MainActivity.this,One.class);
	 				intent9.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent9.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent9,0); 
	 			    break; 
				case R.id.eight:
					infoone.clear();
					dealData("8号");
					Intent intent8=new Intent(MainActivity.this,One.class);
	 				intent8.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent8.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent8,0); 
	 			    break;  
				case R.id.seven:
					infoone.clear();
					dealData("7号");
					Intent intent7=new Intent(MainActivity.this,One.class);
	 				intent7.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent7.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent7,0); 
	 			    break;
				case R.id.six:
					infoone.clear();
					dealData("6号");
					Intent intent6=new Intent(MainActivity.this,One.class);
	 				intent6.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
	 				intent6.putStringArrayListExtra("information1", infoone);
	 				startActivityForResult(intent6,0); 
	 			    break;
				case R.id.five:
						infoone.clear();
						dealData("5号");
						Intent intent5=new Intent(MainActivity.this,One.class);
		 				intent5.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
		 				intent5.putStringArrayListExtra("information1", infoone);
		 				startActivityForResult(intent5,0); 
		 			    break;
				case R.id.four:
						infoone.clear();
						dealData("4号");
						Intent intent4=new Intent(MainActivity.this,One.class);
			 			intent4.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
			 			intent4.putStringArrayListExtra("information1", infoone);
			 			startActivityForResult(intent4,0); 
			 			break;
				case R.id.three:
					
						infoone.clear();
						dealData("3号");
						Intent intent3=new Intent(MainActivity.this,One.class);
			 			intent3.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
			 			intent3.putStringArrayListExtra("information1", infoone);
			 			startActivityForResult(intent3,0); 
			 			break;
				case R.id.two:
						infoone.clear();
						dealData("2号");
						Intent intent2=new Intent(MainActivity.this,One.class);
			 			intent2.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
			 			intent2.putStringArrayListExtra("information1", infoone);
			 			startActivityForResult(intent2,0); 
			 			break;
				case R.id.one:
					infoone.clear();
					dealData("1号");
					Intent intent0=new Intent(MainActivity.this,One.class);
		 			intent0.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
		 			intent0.putStringArrayListExtra("information1", infoone);
		 			startActivityForResult(intent0,0); 
		 			break;
			}
		}
	}
	
    Handler handler1=new Handler(){  
        public void handleMessage(Message msg) {  
            switch (msg.what) {  
            case SendDateToServer.SEND_SUCCESS:  
                Toast.makeText(MainActivity.this, "数据提交成功", Toast.LENGTH_SHORT).show();
                break;  
            case SendDateToServer.SEND_FAIL:  
                Toast.makeText(MainActivity.this, "数据提交失败，请重新尝试", Toast.LENGTH_SHORT).show();
                break;   
            }  
        };        
    };
	
	public void onActivityResult(int requestCode,int resultCode,Intent intent)
	{
		if(requestCode==0&&resultCode==1)   //锅(碟)对桌号1的反馈信息
		{
			infoone = intent.getStringArrayListExtra("information1");
			Bundle data=intent.getExtras();
			String package_self=data.getString("package_self");
			String package_aim=data.getString("package_aim");
			if(package_aim.equals("com.example.synchronization_food.MainActivity"))
			{
				MyApplication.getInstance().deleteActivity("com.example.synchronization_food.MainActivity");
			}
			for(int i = 0; i < infoone.size(); i++)
			  {
				  Log.d("info_main_tag",infoone.get(i));
			  }
			MyApplication.getInstance().showActivity();

			if(infoone.size()>1) 
			{
				Resources resources = this.getBaseContext().getResources();   
				Drawable btnDrawable = resources.getDrawable(R.drawable.shapered);  
				for(int i=0;i<infoone.size();i++)
				{
					String temp=infoone.get(i);
					str=temp.substring(0,temp.indexOf("("));
					if(str.equals("1号"))
					{
						bn1.setBackground(btnDrawable);
					}
					if(str.equals("2号"))
					{
						bn2.setBackground(btnDrawable);
					}
					if(str.equals("3号"))
					{
						bn3.setBackground(btnDrawable);
					}
					if(str.equals("4号"))
					{
						bn4.setBackground(btnDrawable);
					}
					if(str.equals("5号"))
					{
						bn5.setBackground(btnDrawable);
					}
					if(str.equals("6号"))
					{
						bn6.setBackground(btnDrawable);
					}
					if(str.equals("7号"))
					{
						bn7.setBackground(btnDrawable);
					}
					if(str.equals("8号"))
					{
						bn8.setBackground(btnDrawable);
					}			
					if(str.equals("9号"))
					{
						bn9.setBackground(btnDrawable);
					}
					if(str.equals("10号"))
					{
						bn10.setBackground(btnDrawable);
					}
					if(str.equals("11号"))
					{
						bn11.setBackground(btnDrawable);
					}			
					if(str.equals("12号"))
					{
						bn12.setBackground(btnDrawable);
					}
					if(str.equals("13号"))
					{
						bn13.setBackground(btnDrawable);
					}
					if(str.equals("14号"))
					{
						bn14.setBackground(btnDrawable);
					}
					if(str.equals("15号"))
					{
						bn15.setBackground(btnDrawable);
					}
					if(str.equals("16号"))
					{
						bn16.setBackground(btnDrawable);
					}
					if(str.equals("17号"))
					{
						bn17.setBackground(btnDrawable);
					}
					if(str.equals("18号"))
					{
						bn18.setBackground(btnDrawable);
					}
					if(str.equals("19号"))
					{
						bn19.setBackground(btnDrawable);
					}
					if(str.equals("20号"))
					{
						bn20.setBackground(btnDrawable);
					}
					if(str.equals("21号"))
					{
						bn21.setBackground(btnDrawable);
					}
					if(str.equals("22号"))
					{
						bn22.setBackground(btnDrawable);
					}
					if(str.equals("23号"))
					{
						bn23.setBackground(btnDrawable);
					}
					if(str.equals("24号"))
					{
						bn24.setBackground(btnDrawable);
					}
					if(str.equals("25号"))
					{
						bn25.setBackground(btnDrawable);
					}
					if(str.equals("26号"))
					{
						bn26.setBackground(btnDrawable);
					}
					
				}
			}
			else
			{
				Resources resources = this.getBaseContext().getResources();   
				Drawable btnDrawable = resources.getDrawable(R.drawable.shape);   
				for(int i=0;i<infoone.size();i++)
				{
					String temp=infoone.get(i);
					str=temp.substring(0,temp.indexOf("("));
					if(str.equals("1号"))
					{
						bn1.setBackground(btnDrawable);
					}
					if(str.equals("2号"))
					{
						bn2.setBackground(btnDrawable);
					}
					if(str.equals("3号"))
					{
						bn3.setBackground(btnDrawable);
					}
					if(str.equals("4号"))
					{
						bn4.setBackground(btnDrawable);
					}
					if(str.equals("5号"))
					{
						bn5.setBackground(btnDrawable);
					}
					if(str.equals("6号"))
					{
						bn6.setBackground(btnDrawable);
					}
					if(str.equals("7号"))
					{
						bn7.setBackground(btnDrawable);
					}
					if(str.equals("8号"))
					{
						bn8.setBackground(btnDrawable);
					}			
					if(str.equals("9号"))
					{
						bn9.setBackground(btnDrawable);
					}
					if(str.equals("10号"))
					{
						bn10.setBackground(btnDrawable);
					}
					if(str.equals("11号"))
					{
						bn11.setBackground(btnDrawable);
					}			
					if(str.equals("12号"))
					{
						bn12.setBackground(btnDrawable);
					}
					if(str.equals("13号"))
					{
						bn13.setBackground(btnDrawable);
					}
					if(str.equals("14号"))
					{
						bn14.setBackground(btnDrawable);
					}
					if(str.equals("15号"))
					{
						bn15.setBackground(btnDrawable);
					}
					if(str.equals("16号"))
					{
						bn16.setBackground(btnDrawable);
					}
					if(str.equals("17号"))
					{
						bn17.setBackground(btnDrawable);
					}
					if(str.equals("18号"))
					{
						bn18.setBackground(btnDrawable);
					}
					if(str.equals("19号"))
					{
						bn19.setBackground(btnDrawable);
					}
					if(str.equals("20号"))
					{
						bn20.setBackground(btnDrawable);
					}
					if(str.equals("21号"))
					{
						bn21.setBackground(btnDrawable);
					}
					if(str.equals("22号"))
					{
						bn22.setBackground(btnDrawable);
					}
					if(str.equals("23号"))
					{
						bn23.setBackground(btnDrawable);
					}
					if(str.equals("24号"))
					{
						bn24.setBackground(btnDrawable);
					}
					if(str.equals("25号"))
					{
						bn25.setBackground(btnDrawable);
					}
					if(str.equals("26号"))
					{
						bn26.setBackground(btnDrawable);
					}
					
				}
			}
		
		}
	
	}
	
	public void dealData(String tnumber)
	{
		try {
			infoone.clear();
			RecycleDataFromServer one=new RecycleDataFromServer(handler1,tnumber); 
			ExecutorService executor=Executors.newSingleThreadExecutor();
			Future future=executor.submit(one);
			str=(String)future.get();
			Log.d("StrStrStr",str);
			String[] totalone=str.split("t");
			String[]   one_pot=totalone[0].split("\n");
			String[]   one_dish=totalone[1].split("\n");
			String[]   one_wine=totalone[2].split("\n");
			String[]   one_drink=totalone[3].split("\n");
			String[]   yakitoui_one=totalone[4].split("\n");
			String[]   one_staple=totalone[5].split("\n");
			String[]   one_plate=totalone[6].split("\n");
			String[]   costone=totalone[7].split("\n");
			int number=0;
			for(int i=0;i<totalone.length;i++)
			{
				Log.d("totalone",totalone[i]);
			}
			Log.d("yakitoui_one",yakitoui_one[0]);
			for(int i=0;i<one_pot.length;i++)
			 {
				 number=0;
				 if(one_pot[i].equals("空"))
				 {
						 break;
				 }
				 str=one_pot[i].substring(0,one_pot[i].indexOf("("));
				 while(number<Integer.parseInt(one_pot[i].substring(one_pot[i].indexOf("x")+1 ,one_pot[i].indexOf(")") ) ))
				 {
					 if(str.equals("红锅微辣"))
					 {
						 infoone.add("红锅微辣(18)");
						 number++;
						 continue;
					 }
					 if(str.equals("红锅中辣"))
					 {
						 infoone.add("红锅中辣(18)");
						 number++;
						 continue;
					 }
					 if(str.equals("红锅特辣"))
					 {
						 infoone.add("红锅特辣(18)");
						 number++;
						 continue;
					 }
					 if(str.equals("鸳鸯锅"))
					 {
						 infoone.add("鸳鸯锅(22)");
						 number++;
						 continue;
					 }
				 }
			 }
			
			for(int i=0;i<one_dish.length;i++)
			 {
				number=0; 
				if(one_dish[i].equals("空"))
				 {
					 break;
				 }
				 number=0;
				 str=one_dish[i].substring(0,one_dish[i].indexOf("("));
				 while(number<Integer.parseInt(one_dish[i].substring(one_dish[i].indexOf("x")+1 ,one_dish[i].indexOf(")") ) ))
				 {
					 if(str.equals("油碟"))
					 {
						 infoone.add("油碟(4)");
						 number++;
						 continue;
					 }
					 if(str.equals("干碟"))
					 {
						 infoone.add("干碟(4)");
						 number++;
						 continue;
					 }
				 }
			 }
			
			 for(int i=0;i<one_wine.length;i++)
			 {
				 number=0;
				 if(one_wine[i].equals("空"))
				  {
						 break;
				  }
				 str=one_wine[i].substring(0,one_wine[i].indexOf("("));
				 while(number<Integer.parseInt(one_wine[i].substring(one_wine[i].indexOf("x")+1 ,one_wine[i].indexOf(")") ) ))
				 {
					 if(str.equals("纯生"))
					 {
						 infoone.add("纯生(12)");
						 number++;
						 continue;
					 }
					 if(str.equals("勇闯"))
					 {
						 infoone.add("勇闯(8)");
						 number++;
						 continue;
					 }
					 if(str.equals("哈尔滨冰纯"))
					 {
						 infoone.add("哈尔滨冰纯(8)");
						 number++;
						 continue;
					 }
					 if(str.equals("百威"))
					 {
						 infoone.add("百威(12)");
						 number++;
						 continue;
					 }
					 if(str.equals("小麦王"))
					 {
						 infoone.add("小麦王(12)");
						 number++;
						 continue;
					 }
					 if(str.equals("满山跑"))
					 {
						 infoone.add("满山跑(4)");
						 number++;
						 continue;
					 }
					 if(str.equals("歪嘴"))
					 {
						 infoone.add("歪嘴(18)");
						 number++;
						 continue;
					 }
					 if(str.equals("劲酒"))
					 {
						 infoone.add("劲酒(15)");
						 number++;
						 continue;
					 }
					 if(str.equals("二锅头"))
					 {
						 infoone.add("二锅头(8)");
						 number++;
						 continue;
					 }
					 if(str.equals("江小白"))
					 {
						 infoone.add("江小白(18)");
						 number++;
						 continue;
					 }
				 }
			 }
			 for(int i=0;i<one_drink.length;i++)
			 {
				 number=0;
				 if(one_drink[i].equals("空"))
				 {
						 break;
				 }
				 str=one_drink[i].substring(0,one_drink[i].indexOf("("));
				 while(number<Integer.parseInt(one_drink[i].substring(one_drink[i].indexOf("x")+1 ,one_drink[i].indexOf(")") ) ))
						 {
					 		if(str.equals("王老吉"))
					 		{
					 			infoone.add("王老吉(6)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("小唯怡"))
					 		{
					 			infoone.add("小唯怡(4)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("大唯怡"))
					 		{
					 			infoone.add("大唯怡(18)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("鲜橙多"))
					 		{
					 			infoone.add("鲜橙多(12)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("雪碧"))
					 		{
					 			infoone.add("雪碧(4)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("可乐"))
					 		{
					 			infoone.add("可乐(4)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("酸角汁"))
					 		{
					 			infoone.add("酸角汁(6)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("芒果汁"))
					 		{
					 			infoone.add("芒果汁(6)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("枇杷原浆"))
					 		{
					 			infoone.add("枇杷原浆(6)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("蓝莓汁"))
							{
					 			infoone.add("蓝莓汁(8)");
					 			number++;
								continue;
							}
					 		if(str.equals("维维豆奶"))
					 		{
					 			infoone.add("维维豆奶(6)");
					 			number++;
					 			continue;
					 		}
					 		if(str.equals("大王老吉"))
					 		{
					 			infoone.add("大王老吉(12)");
					 			number++;
					 			continue;
					 		}
						 }
			 }	
			 
			 for(int i=0;i<one_staple.length;i++)
			 {
				 number=0;
				 if(one_staple[i].equals("空"))
				 {
						 break;
				 }
				 str=one_staple[i].substring(0,one_staple[i].indexOf("("));
				 while(number<Integer.parseInt(one_staple[i].substring(one_staple[i].indexOf("x")+1 ,one_staple[i].indexOf(")") ) ))
				 {
					 if(str.equals("蛋炒饭"))
					 {
						 infoone.add("蛋炒饭(4)");
						 number++;
						 continue;
					 }
					 if(str.equals("黑米粥"))
					 {
						 infoone.add("黑米粥(4)");
						 number++;
						 continue;
					 }
					 if(str.equals("银耳羹"))
					 {
						 infoone.add("银耳羹(4)");
						 number++;
						 continue;
					 }
					 if(str.equals("白米饭"))
					 {
						 infoone.add("白米饭(2)");
						 number++;
						 continue;
					 }
				 }
			 }
			 
			 for(int i=0;i<one_plate.length;i++)
			 {
				 number=0;
				 if(one_plate[i].equals("空"))
				 {
						 break;
				 }
				 str=one_plate[i].substring(0,one_plate[i].indexOf("("));
				 while(number<Integer.parseInt(one_plate[i].substring(one_plate[i].indexOf("x")+1 ,one_plate[i].indexOf(")") ) ))
				 {
					 if(str.equals("方盘"))
					 {
						 infoone.add("方盘(12)");
						 number++;
						 continue;
					 }
					 if(str.equals("大条盘"))
					 {
						 infoone.add("大条盘(12)");
						 number++;
						 continue;
					 }
					 if(str.equals("小条盘"))
					 {
						 infoone.add("小条盘(5)");
						 number++;
						 continue;
					 }
					 if(str.equals("花瓣盘"))
					 {
						 infoone.add("花瓣盘(10)");
						 number++;
						 continue;
					 }
					 if(str.equals("毛豆"))
					 {
						 infoone.add("毛豆(5)");
						 number++;
						 continue;
					 }
					 if(str.equals("圆篮"))
					 {
						 infoone.add("圆篮(5)");
						 number++;
						 continue;
					 }
					 if(str.equals("花生"))
					 {
						 infoone.add("花生(5)");
						 number++;
						 continue;
					 }
				 }
			 }
			 
			 if(yakitoui_one[0].equals("空"))
			 {
				 
			 }
			 else
			 {
			 	infoone.add(yakitoui_one[0]);
			 }
			 infoone.add(tnumber+"()");
			 
			 for(int i=0;i<infoone.size();i++)
			 {
				 Log.d("infoone",infoone.get(i));
			 }
		} catch (Exception e) {
			// TODO 自动生成的 catch 块
			e.printStackTrace();
		}
	}
	


	 public boolean onKeyDown(int keyCode, KeyEvent event) {
			
	    	if (keyCode == KeyEvent.KEYCODE_BACK) {
	                if ((System.currentTimeMillis() - mExitTime) > 2000) {
	                        Object mHelperUtils;
	                        Toast.makeText(this, "再按一次退出程序", Toast.LENGTH_SHORT).show();
	                        mExitTime = System.currentTimeMillis();

	                } else {
	                	MyApplication.getInstance().exit();
	                }
	                return true;
	        }
	        return super.onKeyDown(keyCode, event);
	    }
	
	public boolean onCreateOptionsMenu(Menu menu) {
		// Inflate the menu; this adds items to the action bar if it is present.
		getMenuInflater().inflate(R.menu.main, menu);
		return true;
	}

	@Override
	public boolean onOptionsItemSelected(MenuItem item) {
		// Handle action bar item clicks here. The action bar will
		// automatically handle clicks on the Home/Up button, so long
		// as you specify a parent activity in AndroidManifest.xml.
		int id = item.getItemId();
		if (id == R.id.action_settings) {
			return true;
		}
		return super.onOptionsItemSelected(item);
	}
}
